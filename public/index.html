<html>
<head>

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

<!-- The theme color for the app -->
<meta name="theme-color" content="#0B0B19">
<!-- Mobile-friendly iOS meta tags -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="mobile-web-app-status-bar-style" content="black">

<meta http-equiv="Content-Security-Policy" content="sandbox 'allow-scripts'">

<link rel="stylesheet" href="/style.css">

  </head>

  <body>

<p id="infotext">Kein Zugangscode Angegeben</p>
<iframe id="encryptedMedia" scrolling="no" allowfullscreen="" width="100%" height="630" frameborder="0">video</iframe>


<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/aes-min.js"></script>
<script>
async function getlinks(name = ""){
    const response = await fetch('https://gist.githubusercontent.com/sharedconnected/18799a006a228d90abd1f5609827c29b/raw/');
    const myJSON = await response.json();

    var url = myJSON[name];
  
  console.log(url)

    var video = decrypt(url);
    document.getElementById("encryptedMedia").src = video
}

const name = prompt("Name vom Film eigeben", "");
var Zugangscode = prompt("Zugangscode eigeben", "");

function decrypt(message = '', key = Zugangscode){
    var code = CryptoJS.AES.decrypt(message, key);
    var decryptedMessage = code.toString(CryptoJS.enc.Utf8);

    return decryptedMessage;
}

var url = getlinks(name)

document.getElementById("infotext").innerHTML = "Angegebener Zugangscode: " + Zugangscode

document.getElementById('encryptedMedia').contentWindow.document.getElementById('voe-player').controls = true

</script>
    
<p>FÃ¼r ein besseres Erlebnis AdBlocker benutzen</p>

</body>
</html>
