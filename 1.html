<!DOCTYPE html>
<html>
  
<p id="h">Kein Antwort</p>


  <p id="encrypted">Kein Zugangscode Angegeben</p>

<iframe id="decrypted" scrolling="no" allowfullscreen="" width="100%" height="630" frameborder="0">video</iframe>


<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>

  
<script>
  async function getlinks(name = ""){
      const response = await fetch('https://filme.echtme.ga/links.json');
      const myJSON = await response.json();
      console.log(myJSON);
      
       var url = myJSON[name];
      console.log(url);
      
      
     
      return url;
  }
  
  const name = 'Spiderman'
  var Zugangscode = 'Heinrich'
  var url = getlinks(name);

function encrypt(message = '', key = Zugangscode){
    var message = CryptoJS.AES.encrypt(message, key);
    return message.toString();
}
function decrypt(message = '', key = Zugangscode){
    var code = CryptoJS.AES.decrypt(message, key);
    var decryptedMessage = code.toString(CryptoJS.enc.Utf8);

    return decryptedMessage;
}

var video = decrypt(url);
console.log (video);


document.getElementById("encrypted").innerHTML = "Angegebener Zugangscode: " + Zugangscode
document.getElementById("decrypted").src = video


</script>
